


<h1><a name="particle_emmitter_settings" id="particle_emmitter_settings">Particle Emmitter Settings</a></h1>
<div class="level1">

<p>

You cannot create a 3D model for delicate things like fire, smoke, or explosions. Particle Emitters are quite an efficient solution to create these kinds of effects: The emitter renders a series of flat orthogonal images and manipulates them in a way that creates the illusion of a anything from a delicate smoke cloud to individual flames, etc. 
</p>

<p>
Creating an effect involves some trial and error to get the settings <em>just right</em>, and it&#039;s worth exploring the expressiveness of the options described below. <strong>Tip:</strong> Use the Scene Editor in the <a href="/com/jme3/gde/core/docs/jme3/jmonkeyplatform.html" class="wikilink1" title="jme3:jmonkeyplatform">jMonkeyPlatform</a> to design and preview effects.
</p>

<p>
<img src="nbdocs:/com/jme3/gde/core/docs/jme3/advanced/butterfly-particle-emitter.png">
</p>

</div>
<!-- SECTION "Particle Emmitter Settings" [1-841] -->
<h2><a name="create_an_emitter" id="create_an_emitter">Create an Emitter</a></h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Create one emitter for each effect: <pre class="code java">ParticleEmitter explosion <span class="sy0">=</span> <span class="kw1">new</span> ParticleEmitter<span class="br0">&#40;</span>
<span class="st0">&quot;My explosion effect&quot;</span>, ParticleMesh.<span class="me1">Type</span>.<span class="me1">Triangle</span>, <span class="nu0">30</span><span class="br0">&#41;</span>;</pre></div>
</li>
<li class="level1"><div class="li"> Attach the emitter to the rootNode and position it in the scene: <pre class="code java">rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>explosion<span class="br0">&#41;</span>;
explosion.<span class="me1">setLocalTranslation</span><span class="br0">&#40;</span>bomb.<span class="me1">getLocalTranslation</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre></div>
</li>
<li class="level1"><div class="li"> Trigger the effect by calling <pre class="code java">explosion.<span class="me1">emitAllParticles</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div>
</li>
<li class="level1"><div class="li"> End the effect by calling <pre class="code java">explosion.<span class="me1">killAllParticles</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre></div>
</li>
</ol>

</div>
<!-- SECTION "Create an Emitter" [842-1373] -->
<h2><a name="configure_parameters" id="configure_parameters">Configure Parameters</a></h2>
<div class="level2">

<p>

Not all of these parameters are required for all kinds of effects. If you don&#039;t specify one of them, a default value will be used. 

</p>
<table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Parameter           </th><th class="col1 leftalign"> Method                </th><th class="col2"> Default </th><th class="col3"> Description </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> number              </td><td class="col1"> <code>setNumParticles()</code> </td><td class="col2 rightalign">  </td><td class="col3"> The maximum number of particles visible at the same time. Specified by user in constructor. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> emission rate       </td><td class="col1"> <code>setParticlesPerSec()</code> </td><td class="col2"> 20 </td><td class="col3"> Density of the effect, how many new particles are emitted per second. <br/>
 Set to zero to control the start of the effect. <br/>
 Set to a number for a constantly running effect. </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> size                </td><td class="col1"> <code>setStartSize()</code>, <code>setEndSize()</code> </td><td class="col2"> 0.2f, 2f </td><td class="col3"> Set both to same value for constant size effect. <br/>
 Set to different values for shrink/grow effect. </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> color               </td><td class="col1"> <code>setStartColor()</code>, <code>setEndColor()</code> </td><td class="col2"> gray, darkgray </td><td class="col3"> Set both to the same color for single-colored effects (e.g. fog). <br/>
 Set both to different colors for a gradient effect (e.g. fire). </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> velocity/direction  </td><td class="col1"> <code>setInitialVelocity()</code> </td><td class="col2"> Vector3f(0,0,0) </td><td class="col3"> A vector specifying how fast or slow particles fly, and it which direction. </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> randomness          </td><td class="col1"> <code>setVelocityVariation()</code> </td><td class="col2"> 0.2f </td><td class="col3"> How much the direction/speed (<code>setInitialVelocity()</code>) can vary. <br/>
 1 = Maximum variation (particles emit in random directions) <br/>
 0 = No variation (particles fly straight with start velocity only). </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> direction           </td><td class="col1"> <code>setFacingVelocity()</code> </td><td class="col2"> false </td><td class="col3"> true = Flying particles pitch in the direction they&#039;re flying (e.g. missiles). <br/>
 false = Particles keep flying rotated the way they started (e.g. debris). </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> direction           </td><td class="col1"> <code>setRandomAngle()</code> </td><td class="col2"> false </td><td class="col3"> true = Flying particle should face at a random angle (e.g. explosion). <br/>
 false = Flying particle flies straight. </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> direction           </td><td class="col1"> <code>setFaceNormal()</code> </td><td class="col2"> Vector3f.NAN </td><td class="col3"> Vector3f = Flying particles face in the given direction. <br/>
 Vector3f.NAN = Flying particles face the camera. </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> lifetime            </td><td class="col1"> <code>setLowLife()</code> </td><td class="col2"> 3f </td><td class="col3"> Minimum time period before particles fade </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> lifetime            </td><td class="col1"> <code>setHighLife()</code> </td><td class="col2"> 7f </td><td class="col3"> Maximum time period before particles fade </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> rotation            </td><td class="col1"> <code>setRotateSpeed()</code> </td><td class="col2"> 0f </td><td class="col3"> 0 = Flying particles don&#039;t spin. <br/>
 &gt; 0 = How fast particle spins while flying. </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> gravity             </td><td class="col1"> <code>setGravity()</code> </td><td class="col2"> 0.1f </td><td class="col3"> &gt;0 = Particles fall “down” (e.g. debris, sparks). <br/>
 0.0f = Particles keep flying (e.g. flames, zero g explosion.) </td>
	</tr>
</table>

<p>

Build up you effect by specifying one parameter after the other. If you change several parameters at the same time, it&#039;s difficult to tell which of the values caused which outcome.
</p>

</div>
<!-- SECTION "Configure Parameters" [1374-4019] -->
<h2><a name="create_an_effect_material" id="create_an_effect_material">Create an Effect Material</a></h2>
<div class="level2">

<p>

<img src="/wiki/lib/exe/fetch.php">
</p>

<p>
Use the common Particle.j3md Material Definition to specify the shape of the particles. The shape is only limited by the texture you provide and can be anything – debris, flames, smoke, mosquitoes, leaves, butterflies… be creative. 
</p>
<pre class="code java">    Material mat_flash <span class="sy0">=</span> <span class="kw1">new</span> Material<span class="br0">&#40;</span>
        assetManager, <span class="st0">&quot;Common/MatDefs/Misc/Particle.j3md&quot;</span><span class="br0">&#41;</span>;
    mat_flash.<span class="me1">setTexture</span><span class="br0">&#40;</span><span class="st0">&quot;m_Texture&quot;</span>, 
        assetManager.<span class="me1">loadTexture</span><span class="br0">&#40;</span><span class="st0">&quot;Effects/Explosion/flash.png&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    flash.<span class="me1">setMaterial</span><span class="br0">&#40;</span>debris_mat<span class="br0">&#41;</span>;
    flash.<span class="me1">setImagesX</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span>; <span class="co1">// columns</span>
    flash.<span class="me1">setImagesY</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span>; <span class="co1">// rows</span>
    flash.<span class="me1">setSelectRandomImage</span><span class="br0">&#40;</span><span class="kw2">true</span><span class="br0">&#41;</span>;</pre>
<p>
The effect texture can contain Sprite animations – a series of different pictures in equally spaced rows and columns. 
</p>
<ul>
<li class="level1"><div class="li"> Specify the number of rows and columns</div>
</li>
<li class="level1"><div class="li"> Specify whether you want to play the series in order or at random.</div>
</li>
</ul>

<p>

Have a look at the following default textures and you will see that you can easily create your own Sprite textures after the same fashion.
</p>

</div>
<!-- SECTION "Create an Effect Material" [4020-5147] -->
<h3><a name="default_particle_textures" id="default_particle_textures">Default Particle Textures</a></h3>
<div class="level3">

<p>

The Material is used together with grayscale texture: The black parts will be transparent and the white parts will be opaque. 
</p>

<p>
The following effect textures are available by default from <code>test-data.jar</code>. You can also load your own textures from your assets directory.

</p>
<table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Texture Path                     </th><th class="col1"> Dimension </th><th class="col2"> Preview </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> Effects/Explosion/Debris.png     </td><td class="col1 leftalign"> 3*3  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> Effects/Explosion/flame.png      </td><td class="col1 leftalign"> 2*2  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> Effects/Explosion/flash.png      </td><td class="col1 leftalign"> 2*2  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> Effects/Explosion/roundspark.png </td><td class="col1 leftalign"> 1*1  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> Effects/Explosion/shockwave.png  </td><td class="col1 leftalign"> 1*1  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> Effects/Explosion/smoketrail.png </td><td class="col1 leftalign"> 1*3  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> Effects/Explosion/spark.png      </td><td class="col1 leftalign"> 1*1  </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> Effects/Smoke/Smoke.png          </td><td class="col1"> 1*15 </td><td class="col2"> <img src="/wiki/lib/exe/fetch.php"> </td>
	</tr>
</table>

<p>
<strong>Tip:</strong> Use the <code>setStartColor()</code>/<code>setEndColor()</code> settings described above to colorize the textures.
</p>

</div>
<!-- SECTION "Default Particle Textures" [5148-6851] -->
<h2><a name="usage_example" id="usage_example">Usage Example</a></h2>
<div class="level2">
<pre class="code java">    ParticleEmitter fire <span class="sy0">=</span> <span class="kw1">new</span> ParticleEmitter<span class="br0">&#40;</span><span class="st0">&quot;Emitter&quot;</span>, ParticleMesh.<span class="me1">Type</span>.<span class="me1">Triangle</span>, <span class="nu0">30</span><span class="br0">&#41;</span>;
    Material mat_red <span class="sy0">=</span> <span class="kw1">new</span> Material<span class="br0">&#40;</span>assetManager, <span class="st0">&quot;Common/MatDefs/Misc/Particle.j3md&quot;</span><span class="br0">&#41;</span>;
    mat_red.<span class="me1">setTexture</span><span class="br0">&#40;</span><span class="st0">&quot;m_Texture&quot;</span>, assetManager.<span class="me1">loadTexture</span><span class="br0">&#40;</span><span class="st0">&quot;Effects/Explosion/flame.png&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    fire.<span class="me1">setMaterial</span><span class="br0">&#40;</span>mat_red<span class="br0">&#41;</span>;
    fire.<span class="me1">setImagesX</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span>; fire.<span class="me1">setImagesY</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span>; <span class="co1">// 2x2 texture animation</span>
    fire.<span class="me1">setEndColor</span><span class="br0">&#40;</span>  <span class="kw1">new</span> ColorRGBA<span class="br0">&#40;</span>1f, 0f, 0f, 1f<span class="br0">&#41;</span><span class="br0">&#41;</span>;   <span class="co1">// red</span>
    fire.<span class="me1">setStartColor</span><span class="br0">&#40;</span><span class="kw1">new</span> ColorRGBA<span class="br0">&#40;</span>1f, 1f, 0f, 0.5f<span class="br0">&#41;</span><span class="br0">&#41;</span>; <span class="co1">// yellow</span>
    fire.<span class="me1">setInitialVelocity</span><span class="br0">&#40;</span><span class="kw1">new</span> Vector3f<span class="br0">&#40;</span>0, <span class="nu0">2</span>, 0<span class="br0">&#41;</span><span class="br0">&#41;</span>;
    fire.<span class="me1">setStartSize</span><span class="br0">&#40;</span>1.5f<span class="br0">&#41;</span>;
    fire.<span class="me1">setEndSize</span><span class="br0">&#40;</span>0.1f<span class="br0">&#41;</span>;
    fire.<span class="me1">setGravity</span><span class="br0">&#40;</span>0<span class="br0">&#41;</span>;
    fire.<span class="me1">setLowLife</span><span class="br0">&#40;</span>0.5f<span class="br0">&#41;</span>;
    fire.<span class="me1">setHighLife</span><span class="br0">&#40;</span>3f<span class="br0">&#41;</span>;
    fire.<span class="me1">setVelocityVariation</span><span class="br0">&#40;</span>0.3f<span class="br0">&#41;</span>; 
    rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>fire<span class="br0">&#41;</span>;</pre>
<p>
Browse the full source code of all <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer"><param name="content" value="http://code.google.com/p/jmonkeyengine/source/browse/#svn/branches/jme3/src/test/jme3test/effect"><param name="text" value="<html><u>effect examples</u></html>"><param name="textColor" value="blue"></object> here.

</p>
<hr />

<p>
See also: <a href="/com/jme3/gde/core/docs/jme3/advanced/effects_overview.html" class="wikilink1" title="jme3:advanced:effects_overview">Effects Overview</a>

</p>

</div>
<!-- SECTION "Usage Example" [6852-] -->
<p><em><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:particle_emitters?do=export_xhtmlbody">view online version</a></em></p>