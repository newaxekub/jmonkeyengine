
<h1><a>Compression</a></h1>
<div>

<p>
Now this is going to be a real simply tutorial but still I wanted this in a separate article. Why you may ask? Simply because it&#039;s a feature that requires some explanation, since it has some caveats that I&#039;ll discuss. Also, I&#039;ll cover writing your own compression message.
</p>

<p>
First off - there are two compression types in SpiderMonkey, they are GZip and Zip. Could&#039;ve added more, but didn&#039;t want to have a dependency for just a compression method. Both are used by wrapping your message in the appropriate compression message:

</p>
<pre>MyMessage msg = new MyMessage&#40;&#41;;
client.send&#40;new GZIPCompressedMessage&#40;msg&#41;&#41;;
// or
client.send&#40;new ZIPCompressedMessage&#40;msg&#41;&#41;;</pre>
<p>

Really simple, but ZIP requires some explanation. The ZIPCompressedMessage class also has two extra methods; setLevel(int) and getLevel(). These methods are for setting the compression level, where 1 is best compression but slowest, and where 9 is weakest compression but fastest. Please note that 9 is <strong>not</strong> the so called &#039;store&#039; ZIP method, which simply stores file in the ZIP, instead of compressing it. This &#039;store&#039; feature is not in SpiderMonkey since otherwise it would not have been called compression.
</p>

</div>

<h3><a>Writing your own</a></h3>
<div>

<p>

Now of course I&#039;d love to see more compression methods in SpiderMonkey, so I&#039;ll discuss how to write your own. Let&#039;s just take GZIPCompressedMessage as example, since that one is the most straightforward. What I&#039;ve done, is I&#039;ve just created a GZIPCompressedMessage which extends CompressedMessage. It does not contain any extra messages, so the GZIPCompressedMessage class is practically &#039;empty&#039;. The magic happens at the serializer, which is called the GZIPSerializer (you can read about writing your own serializer <a href="/com/jme3/gde/core/docs/spidermonkey/tutorial/serializing.html">here</a>). Then I just registered the GZIPSerializer to GZIPCompressedMessage and presto - you&#039;re done. Don&#039;t forget that in the Serializer you need to use writeClassAndObject first and then compress that data, and for read you&#039;d need to use readClassAndObject after you&#039;ve uncompressed (inflated) the message. For this to be clear, it may be useful to read <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer"><param name="content" value="http://code.google.com/p/jmonkeyengine/source/browse/branches/jme3/src/networking/com/jme3/network/serializing/serializers/GZIPSerializer.java"><param name="text" value="<html><u>the GZIPSerializer class</u></html>"><param name="textColor" value="blue"></object>.
</p>

<p>
That&#039;s that! Next tutorial we&#039;re going to discuss how to use the Service system.
</p>

</div>
<p><em><a href="http://jmonkeyengine.org/wiki/doku.php/spidermonkey:tutorial:compression?do=export_xhtmlbody">view online version</a></em></p>